<div class="container-fluid">
  <div class="bg-nav">
    <div class="form-inline" style="margin-bottom: unset">
        <button type="button" class="btn btn-default pull-right margin" (click)="addNewGoal()"><i class="glyphicon glyphicon-plus"></i></button>
      <div class="form-group dropdown-st">
        <label class="control-label">Strategic Plan</label>
        <select id="year" name="year" class="form-control" [(ngModel)]="defaultCycle" (ngModelChange)="getGoals()" style="width:auto;height: auto;padding: 0px;">
          <option *ngFor="let c of cycles;let y = index;" [value]="c.cycleId" [attr.selected]="c.defaultCycle">{{c.planYear}}: [{{c.startYear}} To {{c.endYear}}]</option>
        </select>
      </div>
      </div> 
    </div>

    <!-- new code for form -->
<div class="card card-form" id="add-plan">
  <form [formGroup]="goalForm" (submit)="onSubmit()">
    <div class="card-header">
      <button type="button" class="close" aria-label="Close" (click)="closeForm();isUpdating=false;" data-toggle="tooltip" data-placement="auto" title="Close">
        <span aria-hidden="true">&times;</span>
      </button>
      <h4>ADD GOAL</h4>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-sm-12">
          <div class="form-group">
            <label class="control-label" for="year">Strategic Plan:</label>
            <select id="year" name="year" class="form-control" formControlName="cycleId" [ngModel]="defaultCycle">
              <option *ngFor="let c of cycles;let y = index;" [value]="c.cycleId">{{c.planYear}}: [{{c.startYear}} To {{c.endYear}}] : {{c.description}}</option>
            </select>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12">
          <div class="form-group">
            <label class="control-label">Goal</label>
            <textarea class="form-control" rows="3" formControlName="goal"></textarea>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6"></div>
        <div class="col-sm-6">
          <button type="submit" class="btn btn-default pull-right btn-sub" [disabled]="goalForm.invalid">
            SUBMIT
           </button>
        </div>
      </div>
    </div>
  </form>
</div>




    <!-- new code for form end -->
  <!-- <div class="panel  add-form" id="add-plan" style="display:none;margin-top: 70px;">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a data-toggle="collapse" href="#collapse1" class="accordion-toggle">Add Goal</a>
      </h4>
    </div>
    <div id="collapse1" class="panel-collapse collapse">
      <form [formGroup]="goalForm" (submit)="onSubmit()">      
      <div class="panel-body">
          <div class="row">
            <div class="col-lg-6 col-xs-12 col-sm-6">
              <div class="form-group">
                <label class="control-label" for="year">Strategic Plan:</label>
                <select id="year" name="year" class="form-control" formControlName="cycleId" [ngModel]="defaultCycle">
                  <option *ngFor="let c of cycles;let y = index;" [value]="c.cycleId">{{c.planYear}}: [{{c.startYear}} To {{c.endYear}}] : {{c.description}}</option>
                </select>
              </div>
            </div>
            <div class="col-lg-6 col-xs-12 col-sm-6">
              <div class="form-group">
                <label class="control-label">Goal</label>
                <textarea class="form-control" rows="3" formControlName="goal"></textarea>
              </div>
            </div>
          </div>
      </div>
      <div class="panel-footer">
        <button type="submit" class="btn btn-success btn-empty" [disabled]="goalForm.invalid"><i class="glyphicon glyphicon-ok"></i></button>
        <button type="button" class="btn btn-danger btn-close" (click)="closeForm();isUpdating=false;" data-toggle="tooltip" data-placement="auto" title="Close">
          <i class="glyphicon glyphicon-remove"></i>
        </button>
      </div>
    </form>      
    </div>
  </div> -->
  <!-- code for table -->
    <div class="card table-card">
      <table class="table  table-bordered table-data" >        
        <thead class="header-background" *ngIf="goals.length">
          <tr>
            <th>
                <form action="" class="search-form">
                      <div class="form-group has-feedback" style="margin-bottom:10px;">
                    <label for="search" class="sr-only">Search</label>
                  <input type="text" class="form-control" name="search" id="search"  (keyup)="searchGoal($event,goals)" placeholder="GOAL">
                      <span class="glyphicon glyphicon-search form-control-feedback"></span>
                  </div>
                </form>
            </th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody class="body-background">
          <tr *ngFor="let goal of goals;let i = index;">
            <td style="vertical-align: middle;">{{goal.goal}}</td>
            <td>
              <input type="checkbox" [checked]="goal.disable" (change)="disable($event,goal.goalId)"><span style="color:red" *ngIf="goal.disable">*disabled</span>
            </td>
            <td style="vertical-align: middle;">
              <button class="btn-link" scrollTo href="#add-initiative" (click)="updateGoal(goal)" [disabled]="goal.disable">
              <i class="glyphicon glyphicon-edit btn-del"></i>
              </button>
            </td>
            <td style="vertical-align: middle;">
              <button class="btn-link" (click)="deleteGoal(goal.goalId,goals,i)" [disabled]="goal.disable">
                <i class="glyphicon glyphicon-trash btn-del"></i>
              </button>
            </td>
          </tr>
        </tbody>
        <tfoot *ngIf="!goals.length">
          <tr><td colspan="4" class="text-center">No Data to Display .,.</td></tr>
        </tfoot>
      </table>
    </div>


  <!--popup model-->
  <div class="modal fade modal-add" id="objectModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Confirm</h4>
        </div>
        <div class="modal-body">
          <p>You have successfully added a new Goal.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal" data-toggle="collapse" href="#collapse1">Close</button>
        </div>
      </div>
    </div>
  </div>
</div>